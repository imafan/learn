<ol class="breadcrumb">
    <li><a href="javascript:void(0)" onclick="loadContent('${base}/admin/blog')"><i
            class="glyphicon glyphicon-home"></i>帖子管理</a></li>
    <li><a href="javascript:void(0)"></i>新增帖子</a></li>
</ol>


<div class="inner-container" ng-app="addBlog" ng-init="title = 'World'">
    <div class="row" ng-controller="TextLimitController">
        <form id="addBlogForm" class="form-horizontal" onsubmit="submitBlog();return false;">

            <div class="form-group">
                <label for="inputTitle" class="col-sm-2 control-label">标题</label>

                <div class="col-sm-4">
                    <input type="text" id="inputTitle" ng-model="title" name="blog.title"  class="form-control"  placeholder="标题">
                    {{title}}
                </div>
            </div>

            <div class="form-group">
                <label for="content" class="col-sm-2 control-label">内容</label>

                <div class="col-sm-10">
                    <input type="hidden" name="blog.content" />
                    <textarea id="content" ng-model="message" name="blogContent" class="form-control" rows="3"></textarea>
                    <div>剩余字数：{{remaining()}}</div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">确定</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="/assets/ckeditor/ckeditor.js" type="text/javascript"></script>
<script>
    console.info("test1");
    debugger;
    var addBlogModule = angular.module("addBlog", []);
    console.info("addBlogModule",addBlogModule );
    addBlogModule.controller("TextLimitController", function ($scope) {
        console.info("test");
        var MAX_LEN = 200;

        $scope.remaining = function(){
            if($scope.message && $scope.message.length > 0){
                return MAX_LEN - $scope.message.length;
            }else{
                return MAX_LEN;
            }

        };
    });
    addBlogModule.controller("HelloController", function ($scope) {
        console.info(1);

    })

//    var editor = CKEDITOR.replace('blog.content');
//    var editor = CKEDITOR.replace('blogContent', {
//        "filebrowserUploadUrl" :  "${base}/ckeditor/uploadImage",
//        "toolbar" : [
//            [ 'Source', '-', 'NewPage', 'Preview' ],
//            [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord',
//                '-', 'Scayt' ],
//            [ 'Undo', 'Redo', '-', 'Find', 'Replace', '-', 'SelectAll',
//                'RemoveFormat' ],
//            [ 'Image', 'HorizontalRule', 'Smiley', 'SpecialChar',
//                'PageBreak' ],
//            '/',
//            [ 'Styles', 'Format' ],
//            [ 'Bold', 'Italic', 'Strike' ],
//            [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent',
//                'Blockquote' ], [ 'Maximize', '-', 'About' ] ]
//    });
//
//    function submitBlog(){
//        $("input[name='blog.content']").val(editor.getData());
//        $.ajax({
//            url : "${base}/admin/blog/add",
//            type: "post",
//            data: $("#addBlogForm").serialize(),
//            success: function(res){
//                if(res.success){
//                    layer.alert("添加成功",{icon:1,title:"系统提示"},function(index){
//                        loadContent("${base}/admin/blog");
//                        layer.close(index);
//                    })
//
//                }else{
//                    layer.alert("添加失败",{icon:5,title:"系统提示"});
//                }
//            }
//        })
//    }


</script>